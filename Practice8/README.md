# Practice8_ZarsayevYevgeniy Отчет еще в работе...

## Отчет по Practice8

В данной работе рассматривается обработка больших массивов данных с использованием различных подходов параллельных вычислений. Основной фокус сделан на сравнении выполнения одной и той же операции на CPU с использованием OpenMP, на GPU с использованием CUDA, а также в гибридном режиме, где вычисления распределяются между CPU и GPU. В ходе работы исследуется влияние выбранного способа обработки на время выполнения, анализируются накладные расходы и определяется, в каких случаях гибридный подход позволяет получить наибольший выигрыш по производительности.

### Описание заданий


В рамках практической работы было выполнено несколько заданий, направленных на изучение различных способов обработки массива данных. В первом задании требовалось реализовать обработку массива на CPU с использованием технологии OpenMP. Для этого создаётся массив большого размера, после чего каждый его элемент обрабатывается параллельно на нескольких потоках процессора, а также производится замер времени выполнения.

Во втором задании выполняется обработка массива на GPU с использованием CUDA. Массив данных копируется с CPU на видеокарту, после чего запускается CUDA-ядро, в котором каждый поток обрабатывает отдельный элемент массива. После завершения вычислений результат копируется обратно на CPU и измеряется время выполнения на GPU.

Третье задание посвящено гибридной обработке массива. Массив разделяется на две части: одна часть обрабатывается на CPU с использованием OpenMP, а вторая — на GPU с помощью CUDA. Обе части обрабатываются одновременно, после чего измеряется общее время выполнения гибридного подхода.

В заключительном задании проводится анализ производительности. Сравниваются времена выполнения обработки массива на CPU, GPU и в гибридном режиме, после чего делаются выводы о том, в каких случаях использование GPU или гибридного подхода является наиболее эффективным.


### Результаты:
<img width="559" height="548" alt="image" src="https://github.com/user-attachments/assets/6824370c-4624-44ca-8f54-9cda7c72aadd" />

Анализ результатов показывает, что эффективность выбранного способа обработки сильно зависит от размера массива. Для небольшого массива (N = 100 000) наилучший результат демонстрирует CPU с использованием OpenMP, так как накладные расходы на передачу данных и запуск CUDA-ядра делают использование GPU неэффективным. В этом случае гибридный подход также не даёт существенного выигрыша по сравнению с чисто CPU-реализацией.

При увеличении размера массива (N = 500 000 и N = 1 000 000) GPU начинает показывать значительно лучшее время выполнения по сравнению с CPU. Это связано с высокой степенью параллелизма на видеокарте, которая эффективно используется при большом объёме данных. CPU в этих условиях проигрывает из-за ограниченного количества потоков и меньшей пропускной способности.

Гибридный подход показывает промежуточные результаты и может быть выгоден в отдельных случаях. При выполнении разных операций на CPU и GPU наблюдается выигрыш для некоторых размеров массива, однако при одинаковой операции гибридная схема часто уступает чистому GPU-варианту. В целом, для больших массивов наиболее эффективным является использование GPU, тогда как гибридный подход имеет смысл при более сложных сценариях вычислений и неоднородной нагрузке.




### Блок-схема

<img width="327" height="835" alt="image" src="https://github.com/user-attachments/assets/5d9dfda3-8d8f-4107-bf84-f9ed5f54d70f" />


## Выводы


В ходе выполнения работы было показано, что гибридный подход является эффективным в тех случаях, когда вычислительная нагрузка может быть разумно разделена между CPU и GPU, либо когда на разных частях данных выполняются разные операции. Такой подход особенно оправдан, если часть задач плохо масштабируется на GPU или требует логики, более подходящей для CPU, при этом другая часть может эффективно выполняться на видеокарте.

На производительность гибридных вычислений влияет несколько факторов. К ключевым из них относятся размер обрабатываемых данных, соотношение вычислений и операций передачи памяти, сложность выполняемых операций, а также степень параллелизма на CPU и GPU. Существенную роль играют накладные расходы на запуск CUDA-ядра и синхронизацию между устройствами, которые могут нивелировать выигрыш при небольших объёмах данных.

Оптимизация передачи данных между CPU и GPU достигается за счёт уменьшения количества копирований и их объединения, использования асинхронных операций копирования и вычислений, а также применения закреплённой (pinned) памяти. Дополнительно можно повысить эффективность за счёт перераспределения вычислений так, чтобы максимальный объём работы выполнялся непосредственно на GPU без частых возвратов данных на CPU.

# Контрольные вопросы


1. Какие преимущества предоставляют гибридные вычисления?

Ответ: Гибридные вычисления позволяют использовать CPU и GPU вместе. CPU хорошо справляется с управлением и сложной логикой, а GPU - с массовыми параллельными вычислениями. За счёт этого программа может работать быстрее, чем при использовании только одного устройства.


2. Как минимизировать накладные расходы при передаче данных между CPU и GPU?

Ответ: Нужно как можно реже копировать данные между CPU и GPU и передавать сразу большие блоки данных. Также важно оставлять данные на GPU как можно дольше и выполнять на нём несколько операций подряд, а не возвращать данные после каждого шага.


3. Какие задачи лучше выполнять на CPU, а какие — на GPU?

Ответ: На CPU лучше выполнять задачи с сложной логикой, ветвлениями и последовательными зависимостями. На GPU лучше выносить однотипные операции над большими массивами данных, где одну и ту же операцию можно выполнять параллельно.


4. Как можно улучшить производительность гибридного приложения?

Ответ: Нужно правильно распределять задачи между CPU и GPU, уменьшать количество передач данных и подбирать подходящие размеры блоков и сетки для GPU. Также важно измерять производительность и находить узкие места, чтобы понимать, что именно тормозит программу.







### Сборка

!nvcc -Xcompiler -fopenmp practice8.cu -o practice8


### Запуск
!./practice8
